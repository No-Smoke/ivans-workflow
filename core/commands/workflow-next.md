# Generated by Ivan's Workflow — https://github.com/No-Smoke/ivans-workflow

# /workflow-next — Advance to next agent in pipeline

Read the current task's handoff state and advance to the next agent. Outputs instructions for switching to the correct tmux window.

## Steps

1. Find the active task (most recently modified status.json in handoff directory)
2. Read status.json to determine `current_agent`
3. Determine next agent in the pipeline:
   - planner → builder (window 1)
   - builder → reviewer (window 2)
   - reviewer → tester (window 3)
   - tester → deployer (window 4, if 5+ agents) or done
   - deployer → docs (window 5, if 6 agents) or done
4. Check that a handoff file exists from the current agent
5. Update status.json:
   - Move current agent to `phases_completed`
   - Set `current_agent` to next agent
6. Print:
   ```
   ═══ Advance: builder → reviewer ═══
   Task: TASK-001
   Handoff: docs/agent-comms/TASK-001/02-builder-to-reviewer.json
   
   Switch to tmux window 2:
     Ctrl+b then 2
   
   The Reviewer agent will read the handoff automatically.
   ═══════════════════════════════════
   ```

## Pipeline Complete

If all agents have processed the task:
```
═══ Workflow Complete ═══
Task: TASK-001
Phases: planner ✓ → builder ✓ → reviewer ✓ → tester ✓
Duration: 47 minutes
═════════════════════════
```
