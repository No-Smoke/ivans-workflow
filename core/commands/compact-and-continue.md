# Generated by Ivan's Workflow — https://github.com/No-Smoke/ivans-workflow

# /compact-and-continue — Save state, compact context, resume

Save the current working state to a temporary file, run /compact to free context window space, then read the state back and continue working. Prevents context rot in long sessions.

## Steps

1. Create a state snapshot at `/tmp/ivan-compact-{timestamp}.md`:
   - Current task ID and agent role
   - What was being worked on (last 5 actions)
   - Files currently being modified
   - Pending items / next steps
   - Key decisions made this session

2. Print: "State saved to /tmp/ivan-compact-{timestamp}.md"

3. Run `/compact` (Claude Code built-in context compaction)

4. After compaction, read the state file back:
   - Print the saved context
   - Resume from where we left off

## When to Use

- Session has been running for 30+ minutes
- Responses are getting slower or less coherent
- Working on a long multi-file implementation
- Before starting a new phase within the same session

## State File Format

```markdown
# Compact State — {timestamp}
## Task: {TASK-ID}
## Agent: {role}
## Working On: {current activity}
## Files in Progress:
- {file1} — {what's being done}
- {file2} — {what's being done}
## Next Steps:
1. {step}
2. {step}
## Key Decisions:
- {decision}
```
