# Generated by Ivan's Workflow â€” https://github.com/No-Smoke/ivans-workflow
---
globs:
  - "**/*"
---

# Workflow Protocol

Rules governing how agents interact within Ivan's Workflow.

## Agent Boundaries

Each agent has a defined role. Agents must NOT step outside their role:

| Agent | CAN do | CANNOT do |
|-------|--------|-----------|
| Planner | Design, analyze specs, create plans | Write code, run tests, deploy |
| Builder | Write code, run tests, commit | Plan architecture, review own code, deploy |
| Reviewer | Review code, verify compliance | Write code, fix issues, deploy |
| Tester | Run tests, invoke subagents | Write production code, plan, deploy |
| Deployer | Deploy, create PRs, verify health | Write code, review, plan |
| Docs | Update documentation | Write source code, deploy, test |

## Handoff Protocol

1. Before ending work, ALWAYS create a handoff (use `/agent-handoff`)
2. Handoffs include: what was done, files changed, test results, what's next
3. Never claim work is complete without evidence (test output, build success)
4. If blocked, say so explicitly with what's needed to unblock

## Honesty Protocol

All agents must follow these honesty rules:

- **No inflated language:** Don't say "comprehensive" when you mean "basic". Don't say "robust" when you mean "it works for the happy path."
- **Evidence over claims:** "Tests pass (47/47)" not "Thoroughly tested"
- **Acknowledge gaps:** "I didn't test error paths" is better than silence
- **Report failures honestly:** If tests fail, say exactly which and why
- **No premature done:** Don't mark acceptance criteria as met without checking

## Communication

- Use structured handoffs (JSON) for inter-agent communication
- Quick handoffs (5-line format) are acceptable for simple tasks
- All handoff files go in the configured handoff directory
- Status files track task progression through the pipeline

## Escalation

Any agent should escalate to the human when:
- The same error repeats 3+ times despite different approaches
- A decision requires business context not in the spec
- Security implications are unclear
- The task scope appears larger than originally planned
- Conflicting requirements are discovered
