# Generated by Ivan's Workflow — https://github.com/No-Smoke/ivans-workflow
---
globs:
  - "**/*"
---

# Quality Gates

These quality standards apply to all work produced by any agent.

## Code Quality

- All functions have explicit return types (TypeScript/Python type hints)
- No `any` types in TypeScript unless explicitly justified with a comment
- No bare `catch {}` blocks — always handle or rethrow with context
- No `console.log` in production code — use structured logging
- No magic numbers — use named constants
- Maximum function length: 50 lines (prefer 20-30)
- Maximum file length: 300 lines (split if larger)

## Testing

- New code requires accompanying tests
- Test names describe behavior: "should calculate capacity when temperature below 0°C"
- Tests must be deterministic — no random data, no time-dependent assertions
- Mock external dependencies, don't mock the unit under test
- Coverage target: read from `quality.coverage_threshold` in project-config.yaml

## Commits

- Conventional commit format: `type(scope): description`
- Atomic commits — one logical change per commit
- No WIP commits on shared branches
- All quality gates must pass before commit

## Documentation

- Public APIs must have JSDoc/docstring comments
- Complex algorithms require inline comments explaining the "why"
- Breaking changes require changelog entry
- Configuration options require documentation

## Security

- No secrets in code — use environment variables or credential manager
- Validate all user input
- Use parameterized queries — never string concatenation for SQL/commands
- Review dependency additions for known vulnerabilities
